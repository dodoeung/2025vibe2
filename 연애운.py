import streamlit as st
from datetime import datetime
import random

# âœ… ì •í™•í•œ ë³„ìë¦¬ ê³„ì‚°
def get_zodiac_sign(month, day):
    if (month == 1 and day >= 20) or (month == 2 and day <= 18):
        return "ë¬¼ë³‘ìë¦¬", "ğŸº"
    elif (month == 2 and day >= 19) or (month == 3 and day <= 20):
        return "ë¬¼ê³ ê¸°ìë¦¬", "ğŸŸ"
    elif (month == 3 and day >= 21) or (month == 4 and day <= 19):
        return "ì–‘ìë¦¬", "ğŸ"
    elif (month == 4 and day >= 20) or (month == 5 and day <= 20):
        return "í™©ì†Œìë¦¬", "ğŸ‚"
    elif (month == 5 and day >= 21) or (month == 6 and day <= 20):
        return "ìŒë‘¥ì´ìë¦¬", "ğŸ‘¯â€â™€ï¸"
    elif (month == 6 and day >= 21) or (month == 7 and day <= 22):
        return "ê²Œìë¦¬", "ğŸ¦€"
    elif (month == 7 and day >= 23) or (month == 8 and day <= 22):
        return "ì‚¬ììë¦¬", "ğŸ¦"
    elif (month == 8 and day >= 23) or (month == 9 and day <= 22):
        return "ì²˜ë…€ìë¦¬", "ğŸ‘°"
    elif (month == 9 and day >= 23) or (month == 10 and day <= 22):
        return "ì²œì¹­ìë¦¬", "âš–ï¸"
    elif (month == 10 and day >= 23) or (month == 11 and day <= 21):
        return "ì „ê°ˆìë¦¬", "ğŸ¦‚"
    elif (month == 11 and day >= 22) or (month == 12 and day <= 21):
        return "ì‚¬ìˆ˜ìë¦¬", "ğŸ¹"
    elif (month == 12 and day >= 22) or (month == 1 and day <= 19):
        return "ì—¼ì†Œìë¦¬", "ğŸ"
    else:
        return "ì•Œ ìˆ˜ ì—†ìŒ", ""

# ë³„ìë¦¬ ì„±ê²© ì„¤ëª…
zodiac_traits = {
    "ë¬¼ë³‘ìë¦¬": "ë…ì°½ì ì´ê³  ììœ ë¡œìš´ ì˜í˜¼ì´ì—ìš”. ì—°ì• ì—ì„œë„ íŠ¹ë³„í•œ ê°ì„±ì„ ì¶”êµ¬í•˜ì£ .",
    "ë¬¼ê³ ê¸°ìë¦¬": "ê°ìˆ˜ì„± í’ë¶€í•˜ê³  ë‹¤ì •í•´ìš”. ìƒëŒ€ë¥¼ ê¹Šì´ ì´í•´í•˜ê³  ë°°ë ¤í•  ì¤„ ì•Œì•„ìš”.",
    "ì–‘ìë¦¬": "ì—´ì •ì ì´ê³  ì§ì§„í˜•! ë§ˆìŒì´ ìƒê¸°ë©´ ë°”ë¡œ í‘œí˜„í•˜ëŠ” íƒ€ì…ì´ì—ìš”.",
    "í™©ì†Œìë¦¬": "ì‹ ì¤‘í•˜ê³  ì•ˆì •ì ì¸ ìŠ¤íƒ€ì¼. í•œ ë²ˆ ë§ˆìŒ ì£¼ë©´ ì˜¤ë˜ ê°€ìš”.",
    "ìŒë‘¥ì´ìë¦¬": "ë§¤ë ¥ì ì´ê³  ìœ ì¾Œí•´ìš”. ëŒ€í™”ì™€ ì†Œí†µì„ ì¤‘ì‹œí•˜ëŠ” ìŠ¤íƒ€ì¼!",
    "ê²Œìë¦¬": "ë”°ëœ»í•˜ê³  ê°ì„±ì ì¸ ìŠ¤íƒ€ì¼. ê°€ì •ì ì´ê³  ë°°ë ¤ì‹¬ ê¹Šì–´ìš”.",
    "ì‚¬ììë¦¬": "ìì‹ ê° ë„˜ì¹˜ê³  ì¹´ë¦¬ìŠ¤ë§ˆ ìˆì–´ìš”. ì—°ì• ì—ì„œë„ ì£¼ë„ì ì¸ í¸ì´ì—ìš”.",
    "ì²˜ë…€ìë¦¬": "ì„¬ì„¸í•˜ê³  í˜„ì‹¤ì ì¸ ì—°ì• ë¥¼ ì¶”êµ¬í•´ìš”. ê³„íšì ì¸ ì‚¬ë‘ì„ ì¢‹ì•„í•˜ì£ .",
    "ì²œì¹­ìë¦¬": "ë¡œë§¨í‹±í•˜ê³  ì„¼ìŠ¤ ìˆì–´ìš”. ì¡°í™”ë¥¼ ì¤‘ìš”ì‹œí•˜ëŠ” ìŠ¤íƒ€ì¼ì´ì—ìš”.",
    "ì „ê°ˆìë¦¬": "ê°•ë ¬í•˜ê³  ì§„ì§€í•œ ì‚¬ë‘ì„ ì¶”êµ¬í•´ìš”. ë…ì ìš•ë„ ì‚´ì§ ìˆëŠ” í¸!",
    "ì‚¬ìˆ˜ìë¦¬": "ììœ ë¡­ê³  ì¿¨í•œ ì—°ì• ë¥¼ ì¦ê²¨ìš”. ìœ ì¾Œí•œ ì—ë„ˆì§€ê°€ ë„˜ì³ìš”.",
    "ì—¼ì†Œìë¦¬": "ì±…ì„ê° ìˆê³  ì§„ì¤‘í•œ ìŠ¤íƒ€ì¼. ì‹ ë¢°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì‚¬ë‘ì„ ì¤‘ìš”ì‹œí•´ìš”.",
}

# ë³„ìë¦¬ ê¶í•© ë§¤ì¹­ + ê°„ë‹¨í•œ ì„¤ëª…
zodiac_compatibility = {
    "ë¬¼ë³‘ìë¦¬": ("ìŒë‘¥ì´ìë¦¬", "ììœ ë¡œìš´ ë‘ ì‚¬ëŒ, ì„œë¡œì˜ ìƒê°ì„ ìê·¹í•´ìš”!"),
    "ë¬¼ê³ ê¸°ìë¦¬": ("ê²Œìë¦¬", "ì„œë¡œì˜ ê°ì„±ì„ ë”°ëœ»í•˜ê²Œ ë³´ë“¬ì–´ì£¼ëŠ” ê¶í•©ì´ì—ìš”."),
    "ì–‘ìë¦¬": ("ì‚¬ììë¦¬", "ì—´ì •ì´ í­ë°œí•˜ëŠ” ë¶ˆê½ƒ ì¼€ë¯¸!"),
    "í™©ì†Œìë¦¬": ("ì²˜ë…€ìë¦¬", "ì•ˆì •ê³¼ í˜„ì‹¤ì„ í•¨ê»˜ ì¶”êµ¬í•˜ëŠ” ë“ ë“ í•œ ê¶í•©ì´ì—ìš”."),
    "ìŒë‘¥ì´ìë¦¬": ("ì²œì¹­ìë¦¬", "ì„¼ìŠ¤ì™€ ì†Œí†µì´ ë„˜ì¹˜ëŠ” ì°°ë–¡ê¶í•©!"),
    "ê²Œìë¦¬": ("ë¬¼ê³ ê¸°ìë¦¬", "ê°ì„±ì˜ ê¹Šì´ë¥¼ í•¨ê»˜ ë‚˜ëˆ„ëŠ” ì´ìƒì ì¸ ì§ì´ì—ìš”."),
    "ì‚¬ììë¦¬": ("ì–‘ìë¦¬", "ì—ë„ˆì§€ì™€ ìì‹ ê°ì´ ì˜ ë§ì•„ìš”!"),
    "ì²˜ë…€ìë¦¬": ("ì—¼ì†Œìë¦¬", "í˜„ì‹¤ì ì´ë©´ì„œë„ ë¯¿ìŒì§í•œ ì¡°í•©ì´ì—ìš”."),
    "ì²œì¹­ìë¦¬": ("ìŒë‘¥ì´ìë¦¬", "ëŒ€í™”ê°€ ëŠì´ì§€ ì•ŠëŠ” ì†Œìš¸ë©”ì´íŠ¸ ê¶í•©!"),
    "ì „ê°ˆìë¦¬": ("ë¬¼ê³ ê¸°ìë¦¬", "ê°ì •ì˜ ê¹Šì´ë¥¼ ì´í•´í•´ì£¼ëŠ” ì´ìƒì ì¸ íŒŒíŠ¸ë„ˆì˜ˆìš”."),
    "ì‚¬ìˆ˜ìë¦¬": ("ì‚¬ììë¦¬", "ìœ ì¾Œí•˜ê³  ììœ ë¡œìš´ ì—¬í–‰ ê°™ì€ ì—°ì• !"),
    "ì—¼ì†Œìë¦¬": ("í™©ì†Œìë¦¬", "ì‹ ë¢°ì™€ ì•ˆì •ì´ ë°”íƒ•ì¸ ë‹¨ë‹¨í•œ ì‚¬ë‘ì´ì—ìš”."),
}

# ì¡°ì–¸ ë¬¸êµ¬
advice_list = [
    "ì˜¤ëŠ˜ì€ ì›ƒëŠ” ì–¼êµ´ì´ ì‚¬ë‘ì„ ë¶€ë¥¼ ê±°ì˜ˆìš” ğŸ˜Š",
    "ì ê·¹ì ìœ¼ë¡œ ë‹¤ê°€ê°€ë©´ ìš´ëª…ì˜ ë¬¸ì´ ì—´ë¦´ì§€ë„ ëª°ë¼ìš” ğŸ’Œ",
    "ë§ˆìŒì„ í‘œí˜„í•  ìš©ê¸°ê°€ ì‚¬ë‘ì„ ë¶€ë¥´ê²Œ ë  ê±°ì˜ˆìš” ğŸ—£ï¸",
    "ë¨¼ì € ì¸ì‚¬í•´ë³´ì„¸ìš”. ëª¨ë“  ì¸ì—°ì€ ì‘ì€ ìš©ê¸°ì—ì„œ ì‹œì‘ë¼ìš” ğŸ™‹â€â™€ï¸",
    "ì§€ê¸ˆì˜ ë‹¹ì‹ ì€ ì‚¬ë‘ì„ ë°›ì„ ìê²©ì´ ì¶©ë¶„í•´ìš” ğŸ’–",
    "ì§„ì‹¬ì€ ë°˜ë“œì‹œ ë‹¿ì•„ìš”. ì†”ì§í•´ì§€ëŠ” ê±¸ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš” ğŸŒˆ",
    "ì‚¬ë‘ì€ ì¤€ë¹„ëœ ì‚¬ëŒì—ê²Œ ì°¾ì•„ì™€ìš”. ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ì¤€ë¹„ëì–´ìš” ğŸ•Šï¸",
    "ì‚¬ë‘ì€ ê¸°ë‹¤ë¦¼ì´ ì•„ë‹ˆë¼, ì„ íƒì´ì—ìš”. ë‹¹ì‹ ì´ ì›€ì§ì¼ ì°¨ë¡€ì—ìš” ğŸš¶â€â™€ï¸",
    "ì ì‹œì˜ ìš©ê¸°ê°€ ì˜¤ë«ë™ì•ˆì˜ í–‰ë³µì„ ê°€ì ¸ë‹¤ì¤„ ìˆ˜ ìˆì–´ìš” ğŸ§¡",
    "ì˜¤ëŠ˜ì˜ ë…¸ë ¥ì€ ë‚´ì¼ì˜ ì„¤ë ˜ìœ¼ë¡œ ëŒì•„ì˜¬ ê±°ì˜ˆìš” âœ¨",
]

# --- Streamlit App ---
st.set_page_config(page_title="ìƒì¼ë¡œ ë³´ëŠ” ëŸ¬ë¸Œ ìš´ëª…", page_icon="ğŸ’˜", layout="centered")

st.markdown("""
    <h1 style="text-align:center; color:#e91e63;">ğŸ€ ìƒì¼ë¡œ ë³´ëŠ” ëŸ¬ë¸Œ ìš´ëª… ğŸ’˜</h1>
    <p style="text-align:center; font-size:18px;">ë‹¹ì‹ ì˜ ìƒì¼ ì†ì— ìˆ¨ì–´ ìˆëŠ” ì˜¤ëŠ˜ì˜ ì—°ì•  ê¸°ìš´ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
""", unsafe_allow_html=True)

name = st.text_input("ë‹¹ì‹ ì˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ’â€â™€ï¸", "")
birth_date = st.date_input("ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš” ğŸ“…")

if st.button("âœ¨ ëŸ¬ë¸Œ ìš´ëª… í™•ì¸í•˜ê¸° âœ¨"):
    if name:
        month = birth_date.month
        day = birth_date.day
        year = birth_date.year

        # ë³„ìë¦¬
        sign, emoji = get_zodiac_sign(month, day)
        trait = zodiac_traits.get(sign, "")
        compat_sign, compat_desc = zodiac_compatibility.get(sign, ("", ""))

        # ì ìˆ˜
        random.seed(int(f"{month}{day}{year}"))
        love_score = random.randint(65, 99)

        # ì¡°ì–¸
        advice = random.choice(advice_list)

        # ê²°ê³¼ ì¶œë ¥
        st.markdown("---")
        st.markdown(f"""
        <div style='text-align:center;'>
            <h2>{emoji} <strong>{sign}</strong>ì˜ {name}ë‹˜ ğŸ’–</h2>
            <p style="font-size:18px;">âœ¨ {trait}</p>
            <h1 style="color:#ff4081; margin-top:24px;">ğŸ’˜ ì˜¤ëŠ˜ì˜ ì—°ì• ìš´ ì ìˆ˜: <strong>{love_score}ì </strong></h1>
            <p style="font-size:20px; margin-top:16px;">ğŸ”® ì¡°ì–¸: {advice}</p>
            <p style="font-size:18px; margin-top:24px;">ğŸ’• ì°°ë–¡ê¶í•© ë³„ìë¦¬: <strong>{compat_sign}</strong></p>
            <p style="font-size:16px; color:#666;">{compat_desc}</p>
        </div>
        """, unsafe_allow_html=True)
    else:
        st.warning("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ˜Š")


