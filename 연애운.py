import streamlit as st
from datetime import datetime
import random

# ë³„ìë¦¬ ê³„ì‚° í•¨ìˆ˜
def get_zodiac_sign(month, day):
    zodiac_signs = [
        ("ì—¼ì†Œìë¦¬", (12, 22), (1, 19), "ğŸ"),
        ("ë¬¼ë³‘ìë¦¬", (1, 20), (2, 18), "ğŸº"),
        ("ë¬¼ê³ ê¸°ìë¦¬", (2, 19), (3, 20), "ğŸŸ"),
        ("ì–‘ìë¦¬", (3, 21), (4, 19), "ğŸ"),
        ("í™©ì†Œìë¦¬", (4, 20), (5, 20), "ğŸ‚"),
        ("ìŒë‘¥ì´ìë¦¬", (5, 21), (6, 21), "ğŸ‘¯â€â™€ï¸"),
        ("ê²Œìë¦¬", (6, 22), (7, 22), "ğŸ¦€"),
        ("ì‚¬ììë¦¬", (7, 23), (8, 22), "ğŸ¦"),
        ("ì²˜ë…€ìë¦¬", (8, 23), (9, 22), "ğŸ‘°"),
        ("ì²œì¹­ìë¦¬", (9, 23), (10, 23), "âš–ï¸"),
        ("ì „ê°ˆìë¦¬", (10, 24), (11, 22), "ğŸ¦‚"),
        ("ì‚¬ìˆ˜ìë¦¬", (11, 23), (12, 21), "ğŸ¹"),
    ]
    for sign, start, end, emoji in zodiac_signs:
        if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
            return sign, emoji
    return "ì•Œ ìˆ˜ ì—†ìŒ", ""

# ì ê·¹ì  + ë”°ëœ»í•œ ì¡°ì–¸ ë¬¸êµ¬ ëª¨ìŒ
advice_list = [
    "ì˜¤ëŠ˜ì€ ì›ƒëŠ” ì–¼êµ´ì´ ì‚¬ë‘ì„ ë¶€ë¥¼ ê±°ì˜ˆìš” ğŸ˜Š",
    "ì ê·¹ì ìœ¼ë¡œ ë‹¤ê°€ê°€ë©´ ìš´ëª…ì˜ ë¬¸ì´ ì—´ë¦´ì§€ë„ ëª°ë¼ìš” ğŸ’Œ",
    "ë§ˆìŒì„ í‘œí˜„í•  ìš©ê¸°ê°€ ì‚¬ë‘ì„ ë¶€ë¥´ê²Œ ë  ê±°ì˜ˆìš” ğŸ—£ï¸",
    "ë¨¼ì € ì¸ì‚¬í•´ë³´ì„¸ìš”. ëª¨ë“  ì¸ì—°ì€ ì‘ì€ ìš©ê¸°ì—ì„œ ì‹œì‘ë¼ìš” ğŸ™‹â€â™€ï¸",
    "ì§€ê¸ˆì˜ ë‹¹ì‹ ì€ ì‚¬ë‘ì„ ë°›ì„ ìê²©ì´ ì¶©ë¶„í•´ìš” ğŸ’–",
    "ì§„ì‹¬ì€ ë°˜ë“œì‹œ ë‹¿ì•„ìš”. ì†”ì§í•´ì§€ëŠ” ê±¸ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš” ğŸŒˆ",
    "ì‚¬ë‘ì€ ì¤€ë¹„ëœ ì‚¬ëŒì—ê²Œ ì°¾ì•„ì™€ìš”. ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ì¤€ë¹„ëì–´ìš” ğŸ•Šï¸",
    "ì‚¬ë‘ë°›ê³  ì‹¶ë‹¤ë©´ ë¨¼ì € ì‚¬ë‘ì„ ë‚˜ëˆ ë³´ì„¸ìš” ğŸ¤²",
    "ì‚¬ë‘ì€ ê¸°ë‹¤ë¦¼ì´ ì•„ë‹ˆë¼, ì„ íƒì´ì—ìš”. ë‹¹ì‹ ì´ ì›€ì§ì¼ ì°¨ë¡€ì—ìš” ğŸš¶â€â™€ï¸",
    "ì‘ì€ ê´€ì‹¬ì´ í° ì¸ì—°ì´ ë  ìˆ˜ ìˆì–´ìš” ğŸ‘€",
    "ì§€ê¸ˆ í–‰ë™í•˜ë©´ ë‚´ì¼ì€ ë‹¤ë¥´ê²Œ í¼ì³ì§ˆ ê±°ì˜ˆìš” ğŸ—“ï¸",
    "í˜¸ê°ì€ í‘œí˜„ë  ë•Œ ê½ƒì„ í”¼ì›Œìš” ğŸŒ¸",
    "ì ì‹œì˜ ìš©ê¸°ê°€ ì˜¤ë«ë™ì•ˆì˜ í–‰ë³µì„ ê°€ì ¸ë‹¤ì¤„ ìˆ˜ ìˆì–´ìš” ğŸ§¡",
    "ì˜¤ëŠ˜ì˜ ë…¸ë ¥ì€ ë‚´ì¼ì˜ ì„¤ë ˜ìœ¼ë¡œ ëŒì•„ì˜¬ ê±°ì˜ˆìš” âœ¨",
    "ì‚¬ë‘ì€ ìš´ëª…ë„ ìˆì§€ë§Œ, íƒœë„ì´ê¸°ë„ í•´ìš” ğŸ’ª",
    "ì ê·¹ì ì¸ ë‹¹ì‹ ì—ê²Œ í–‰ìš´ì´ ë”°ë¼ë¶™ì–´ìš” ğŸ€",
    "ë‹¹ì‹  ì•ˆì˜ ë§¤ë ¥ì„ ì„¸ìƒì— ë³´ì—¬ì¤„ ë•Œê°€ ì™”ì–´ìš” ğŸŒŸ",
    "ì‚¬ë‘ì— ìˆì–´ ë§ì„¤ì„ì€ ê¸°íšŒë¥¼ ë†“ì¹˜ê²Œ í•´ìš” â€“ ì˜¤ëŠ˜ì€ í–‰ë™í•  ë‚ ì´ì—ìš” ğŸ”¥",
    "ì‘ì€ ì¹­ì°¬ì´ ê´€ê³„ì˜ ì‹œì‘ì¼ ìˆ˜ ìˆì–´ìš”. ì‹œì‘í•´ë³´ì„¸ìš” ğŸ’¬",
    "ë‹¹ì‹ ì˜ ì˜¤ëŠ˜ í–‰ë™ì´ ë‚´ì¼ì˜ ì¸ì—°ì„ ë°”ê¿”ì¤„ ê±°ì˜ˆìš” ğŸ§­"
]

# ê¶í•© ê°€ëŠ¥í•œ ë³„ìë¦¬
zodiac_compatibility = [
    ("ì—¼ì†Œìë¦¬", "í™©ì†Œìë¦¬"),
    ("ë¬¼ë³‘ìë¦¬", "ìŒë‘¥ì´ìë¦¬"),
    ("ë¬¼ê³ ê¸°ìë¦¬", "ê²Œìë¦¬"),
    ("ì–‘ìë¦¬", "ì‚¬ììë¦¬"),
    ("í™©ì†Œìë¦¬", "ì²˜ë…€ìë¦¬"),
    ("ìŒë‘¥ì´ìë¦¬", "ì²œì¹­ìë¦¬"),
    ("ê²Œìë¦¬", "ë¬¼ê³ ê¸°ìë¦¬"),
    ("ì‚¬ììë¦¬", "ì–‘ìë¦¬"),
    ("ì²˜ë…€ìë¦¬", "ì—¼ì†Œìë¦¬"),
    ("ì²œì¹­ìë¦¬", "ìŒë‘¥ì´ìë¦¬"),
    ("ì „ê°ˆìë¦¬", "ë¬¼ê³ ê¸°ìë¦¬"),
    ("ì‚¬ìˆ˜ìë¦¬", "ì‚¬ììë¦¬"),
]

# --- Streamlit App ---

st.set_page_config(page_title="ìƒì¼ë¡œ ë³´ëŠ” ëŸ¬ë¸Œ ìš´ëª…", page_icon="ğŸ’˜", layout="centered")

st.markdown("""
    <h1 style="text-align:center; color:#e91e63;">ğŸ€ ìƒì¼ë¡œ ë³´ëŠ” ëŸ¬ë¸Œ ìš´ëª… ğŸ’˜</h1>
    <p style="text-align:center; font-size:18px;">ë‹¹ì‹ ì˜ ìƒì¼ ì†ì— ìˆ¨ì–´ ìˆëŠ” ì˜¤ëŠ˜ì˜ ì—°ì•  ê¸°ìš´ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>
""", unsafe_allow_html=True)

name = st.text_input("ë‹¹ì‹ ì˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ’â€â™€ï¸", "")
birth_date = st.date_input("ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš” ğŸ“…")

if st.button("âœ¨ ëŸ¬ë¸Œ ìš´ëª… í™•ì¸í•˜ê¸° âœ¨"):
    if name:
        birth_month = birth_date.month
        birth_day = birth_date.day
        birth_year = birth_date.year

        # ë³„ìë¦¬ ê³„ì‚°
        user_zodiac, emoji = get_zodiac_sign(birth_month, birth_day)

        # ì—°ì• ìš´ ì ìˆ˜ ìƒì„±
        score_seed = int(f"{birth_month}{birth_day}{birth_year}")
        random.seed(score_seed)
        love_score = random.randint(60, 100)

        # ì¡°ì–¸ ë¬¸êµ¬
        advice = random.choice(advice_list)

        # ê¶í•© ë³„ìë¦¬
        match = next((z for z in zodiac_compatibility if z[0] == user_zodiac), ("ê¶í•© ì—†ìŒ", "ì—†ìŒ"))

        st.markdown("---")
        st.markdown(f"""
        <div style='text-align:center;'>
            <h2>{emoji} <strong>{user_zodiac}</strong>ì˜ {name}ë‹˜ ğŸ’–</h2>
            <p style="font-size:22px;">ì˜¤ëŠ˜ì˜ ì—°ì• ìš´ ì ìˆ˜ëŠ”...</p>
            <h1 style="color:#ff4081;">ğŸ’˜ {love_score}ì  ğŸ’˜</h1>
            <p style="font-size:20px;">ğŸ”® {advice}</p>
            <p style="font-size:18px;">ğŸ’• ì˜¤ëŠ˜ì˜ ì°°ë–¡ê¶í•©: <strong>{match[1]}</strong>ìë¦¬</p>
        </div>
        """, unsafe_allow_html=True)
    else:
        st.warning("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ’¡")

